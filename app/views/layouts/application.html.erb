<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>Courses: <%= controller.action_name %></title>
  <%= stylesheet_link_tag 'scaffold', 'ilmo2' %>
	<%= javascript_include_tag 'jquery-1.3.2.min.js' %>
	<script type="text/javascript">
		function refreshNewsfeed() {
			// $.getJSON("/newsfeed.json", function(vastaus) {
			// 				var  newsfeed_div = $("#newsfeed");
			// 				for (var i in vastaus) {
			// 					var newsfeed_item = $("<h3>");
			// 					newsfeed_div.append("<p>"+vastaus[i].newsfeed.message+"<br />");
			// 					newsfeed_div.append(vastaus[i].newsfeed.created_at+"</p>")
			// 				}
			// 			})
		}
		
		window.onload = function() {
			
			window.setTimeout("refreshNewsfeed()", 2000)
		}
	</script>
</head>
<body>
	<div id="whole">
				
		<h1 id="title"><%= link_to 'Ilmo 2.0', root_url%></h1>
	
		<div id="newsfeed" style="float:right">
	   	<h2>Newsfeed</h2>
			<ul>
	   		<%= render :partial => "newsfeed/items", :collection => Newsfeed.recent %>
			</ul>
	 	</div>

		<% if flash[:notice] -%>
			<div id="notice">
				<%= flash[:notice] %>
			</div>
		<% end -%>
	
		<% if flash[:msg] -%>
			<div id="message">
				<%= flash[:msg] %>
			</div>
		<% end -%>
	
		<div id="logged_status">
			<%=t :welcome %>, 
			<% if logged_in? %>
				<%= link_to current_user.username, edit_user_url(current_user) %>. (<%= link_to "logout", logout_url %>)
			<% else %>
				<%=t :guest %> (<%= link_to 'Login', login_url %>)
			<% end %>
		</div>

		<%= yield %>
	</div>
	<div id="timeCreated">
		Page created: <%= created_time  %>
	</div>
</body>
</html>
